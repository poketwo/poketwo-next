# Copyright (c) 2022 Oliver Ni
#
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.

defmodule Mix.Tasks.Db.SetSpawnWeights do
  @moduledoc "Sets default spawn weights of PokÃ©mon in the database"
  @shortdoc "Sets default spawn weights"
  @requirements ["app.start"]

  @spawn_weights %{
    1 => 342,
    2 => 364,
    3 => 65,
    4 => 444,
    5 => 316,
    6 => 81,
    7 => 409,
    8 => 176,
    9 => 104,
    10 => 1645,
    11 => 315,
    12 => 93,
    13 => 1670,
    14 => 347,
    15 => 111,
    16 => 1994,
    17 => 530,
    18 => 139,
    19 => 884,
    20 => 177,
    21 => 354,
    22 => 86,
    23 => 555,
    24 => 131,
    25 => 527,
    26 => 108,
    27 => 434,
    28 => 129,
    29 => 1513,
    30 => 263,
    31 => 85,
    32 => 1080,
    33 => 467,
    34 => 136,
    35 => 423,
    36 => 118,
    37 => 331,
    38 => 96,
    39 => 524,
    40 => 73,
    41 => 1243,
    42 => 479,
    43 => 1050,
    44 => 375,
    45 => 138,
    46 => 309,
    47 => 95,
    48 => 411,
    49 => 110,
    50 => 533,
    51 => 88,
    52 => 396,
    53 => 75,
    54 => 466,
    55 => 118,
    56 => 515,
    57 => 78,
    58 => 366,
    59 => 130,
    60 => 2146,
    61 => 372,
    62 => 100,
    63 => 1087,
    64 => 542,
    65 => 108,
    66 => 1134,
    67 => 427,
    68 => 74,
    69 => 2182,
    70 => 385,
    71 => 95,
    72 => 349,
    73 => 78,
    74 => 1571,
    75 => 497,
    76 => 80,
    77 => 265,
    78 => 70,
    79 => 325,
    80 => 84,
    81 => 2197,
    82 => 510,
    83 => 109,
    84 => 448,
    85 => 140,
    86 => 268,
    87 => 96,
    88 => 433,
    89 => 131,
    90 => 331,
    91 => 84,
    92 => 1317,
    93 => 519,
    94 => 84,
    95 => 411,
    96 => 294,
    97 => 80,
    98 => 257,
    99 => 120,
    100 => 347,
    101 => 125,
    102 => 387,
    103 => 128,
    104 => 563,
    105 => 96,
    106 => 138,
    107 => 118,
    108 => 337,
    109 => 349,
    110 => 135,
    111 => 2052,
    112 => 432,
    113 => 545,
    114 => 524,
    115 => 140,
    116 => 1362,
    117 => 398,
    118 => 465,
    119 => 110,
    120 => 493,
    121 => 105,
    122 => 137,
    123 => 288,
    124 => 97,
    125 => 321,
    126 => 523,
    127 => 114,
    128 => 141,
    129 => 510,
    130 => 118,
    131 => 98,
    132 => 124,
    133 => 282,
    134 => 110,
    135 => 71,
    136 => 123,
    137 => 1111,
    138 => 573,
    139 => 91,
    140 => 496,
    141 => 93,
    142 => 70,
    143 => 86,
    144 => 4,
    145 => 9,
    146 => 8,
    147 => 784,
    148 => 340,
    149 => 75,
    150 => 8,
    151 => 9,
    152 => 349,
    153 => 390,
    154 => 118,
    155 => 757,
    156 => 499,
    157 => 136,
    158 => 631,
    159 => 452,
    160 => 82,
    161 => 517,
    162 => 140,
    163 => 496,
    164 => 87,
    165 => 566,
    166 => 139,
    167 => 401,
    168 => 81,
    169 => 96,
    170 => 345,
    171 => 73,
    172 => 128,
    173 => 124,
    174 => 66,
    175 => 2231,
    176 => 435,
    177 => 307,
    178 => 137,
    179 => 1814,
    180 => 482,
    181 => 83,
    182 => 68,
    183 => 308,
    184 => 140,
    185 => 117,
    186 => 93,
    187 => 1992,
    188 => 513,
    189 => 143,
    190 => 497,
    191 => 349,
    192 => 137,
    193 => 364,
    194 => 471,
    195 => 102,
    196 => 75,
    197 => 73,
    198 => 497,
    199 => 72,
    200 => 359,
    201 => 114,
    202 => 123,
    203 => 93,
    204 => 516,
    205 => 128,
    206 => 109,
    207 => 502,
    208 => 73,
    209 => 489,
    210 => 87,
    211 => 135,
    212 => 132,
    213 => 137,
    214 => 70,
    215 => 378,
    216 => 2283,
    217 => 401,
    218 => 563,
    219 => 87,
    220 => 2249,
    221 => 275,
    222 => 88,
    223 => 437,
    224 => 142,
    225 => 85,
    226 => 119,
    227 => 106,
    228 => 323,
    229 => 143,
    230 => 69,
    231 => 290,
    232 => 66,
    233 => 435,
    234 => 295,
    235 => 100,
    236 => 445,
    237 => 111,
    238 => 133,
    239 => 110,
    240 => 122,
    241 => 116,
    242 => 108,
    243 => 8,
    244 => 4,
    245 => 7,
    246 => 781,
    247 => 250,
    248 => 68,
    249 => 5,
    250 => 4,
    251 => 9,
    252 => 732,
    253 => 478,
    254 => 91,
    255 => 349,
    256 => 351,
    257 => 144,
    258 => 584,
    259 => 548,
    260 => 77,
    261 => 386,
    262 => 137,
    263 => 433,
    264 => 108,
    265 => 1325,
    266 => 534,
    267 => 93,
    268 => 400,
    269 => 72,
    270 => 1148,
    271 => 395,
    272 => 69,
    273 => 1154,
    274 => 428,
    275 => 113,
    276 => 497,
    277 => 142,
    278 => 283,
    279 => 67,
    280 => 2149,
    281 => 373,
    282 => 64,
    283 => 470,
    284 => 67,
    285 => 291,
    286 => 99,
    287 => 2214,
    288 => 425,
    289 => 71,
    290 => 341,
    291 => 138,
    292 => 127,
    293 => 1986,
    294 => 481,
    295 => 140,
    296 => 479,
    297 => 102,
    298 => 128,
    299 => 530,
    300 => 483,
    301 => 91,
    302 => 76,
    303 => 106,
    304 => 1140,
    305 => 479,
    306 => 143,
    307 => 438,
    308 => 77,
    309 => 432,
    310 => 111,
    311 => 86,
    312 => 138,
    313 => 73,
    314 => 112,
    315 => 268,
    316 => 572,
    317 => 85,
    318 => 449,
    319 => 85,
    320 => 487,
    321 => 79,
    322 => 366,
    323 => 114,
    324 => 87,
    325 => 385,
    326 => 124,
    327 => 78,
    328 => 1894,
    329 => 347,
    330 => 73,
    331 => 296,
    332 => 143,
    333 => 419,
    334 => 143,
    335 => 91,
    336 => 116,
    337 => 84,
    338 => 116,
    339 => 328,
    340 => 132,
    341 => 358,
    342 => 136,
    343 => 267,
    344 => 144,
    345 => 269,
    346 => 138,
    347 => 420,
    348 => 81,
    349 => 428,
    350 => 74,
    351 => 142,
    352 => 105,
    353 => 512,
    354 => 78,
    355 => 1668,
    356 => 290,
    357 => 138,
    358 => 76,
    359 => 134,
    360 => 74,
    361 => 380,
    362 => 127,
    363 => 2260,
    364 => 461,
    365 => 119,
    366 => 318,
    367 => 119,
    368 => 114,
    369 => 130,
    370 => 125,
    371 => 1227,
    372 => 208,
    373 => 87,
    374 => 693,
    375 => 339,
    376 => 47,
    377 => 8,
    378 => 7,
    379 => 6,
    380 => 7,
    381 => 4,
    382 => 6,
    383 => 6,
    384 => 7,
    385 => 15,
    386 => 14,
    387 => 460,
    388 => 451,
    389 => 92,
    390 => 728,
    391 => 399,
    392 => 125,
    393 => 689,
    394 => 515,
    395 => 92,
    396 => 1160,
    397 => 295,
    398 => 72,
    399 => 390,
    400 => 134,
    401 => 435,
    402 => 137,
    403 => 1463,
    404 => 436,
    405 => 80,
    406 => 83,
    407 => 107,
    408 => 536,
    409 => 68,
    410 => 573,
    411 => 115,
    412 => 558,
    413 => 121,
    414 => 103,
    415 => 475,
    416 => 111,
    417 => 103,
    418 => 530,
    419 => 96,
    420 => 413,
    421 => 127,
    422 => 277,
    423 => 93,
    424 => 100,
    425 => 541,
    426 => 104,
    427 => 496,
    428 => 75,
    429 => 79,
    430 => 122,
    431 => 370,
    432 => 105,
    433 => 75,
    434 => 544,
    435 => 96,
    436 => 294,
    437 => 127,
    438 => 110,
    439 => 110,
    440 => 119,
    441 => 111,
    442 => 109,
    443 => 1174,
    444 => 229,
    445 => 45,
    446 => 134,
    447 => 329,
    448 => 110,
    449 => 463,
    450 => 66,
    451 => 468,
    452 => 102,
    453 => 534,
    454 => 98,
    455 => 105,
    456 => 378,
    457 => 133,
    458 => 108,
    459 => 536,
    460 => 69,
    461 => 129,
    462 => 111,
    463 => 142,
    464 => 85,
    465 => 137,
    466 => 103,
    467 => 121,
    468 => 118,
    469 => 129,
    470 => 144,
    471 => 137,
    472 => 106,
    473 => 72,
    474 => 123,
    475 => 111,
    476 => 126,
    477 => 76,
    478 => 79,
    479 => 139,
    480 => 9,
    481 => 6,
    482 => 4,
    483 => 9,
    484 => 9,
    485 => 6,
    486 => 4,
    487 => 4,
    488 => 7,
    489 => 12,
    490 => 12,
    491 => 11,
    492 => 17,
    493 => 15,
    494 => 17,
    495 => 516,
    496 => 395,
    497 => 113,
    498 => 616,
    499 => 294,
    500 => 76,
    501 => 697,
    502 => 396,
    503 => 73,
    504 => 517,
    505 => 97,
    506 => 1824,
    507 => 484,
    508 => 75,
    509 => 472,
    510 => 89,
    511 => 484,
    512 => 144,
    513 => 339,
    514 => 143,
    515 => 381,
    516 => 104,
    517 => 566,
    518 => 122,
    519 => 2139,
    520 => 446,
    521 => 73,
    522 => 496,
    523 => 112,
    524 => 1510,
    525 => 574,
    526 => 77,
    527 => 505,
    528 => 110,
    529 => 488,
    530 => 74,
    531 => 139,
    532 => 2154,
    533 => 508,
    534 => 69,
    535 => 1961,
    536 => 502,
    537 => 137,
    538 => 64,
    539 => 67,
    540 => 2154,
    541 => 382,
    542 => 128,
    543 => 1466,
    544 => 322,
    545 => 79,
    546 => 506,
    547 => 72,
    548 => 499,
    549 => 117,
    550 => 81,
    551 => 1919,
    552 => 552,
    553 => 142,
    554 => 423,
    555 => 141,
    556 => 90,
    557 => 395,
    558 => 130,
    559 => 438,
    560 => 72,
    561 => 101,
    562 => 510,
    563 => 94,
    564 => 558,
    565 => 64,
    566 => 331,
    567 => 125,
    568 => 414,
    569 => 118,
    570 => 470,
    571 => 83,
    572 => 329,
    573 => 90,
    574 => 1272,
    575 => 547,
    576 => 73,
    577 => 1521,
    578 => 421,
    579 => 71,
    580 => 375,
    581 => 115,
    582 => 1718,
    583 => 506,
    584 => 140,
    585 => 575,
    586 => 143,
    587 => 126,
    588 => 362,
    589 => 139,
    590 => 495,
    591 => 81,
    592 => 456,
    593 => 64,
    594 => 100,
    595 => 490,
    596 => 94,
    597 => 563,
    598 => 104,
    599 => 1985,
    600 => 535,
    601 => 131,
    602 => 1679,
    603 => 401,
    604 => 64,
    605 => 288,
    606 => 76,
    607 => 1025,
    608 => 404,
    609 => 144,
    610 => 1524,
    611 => 259,
    612 => 131,
    613 => 384,
    614 => 69,
    615 => 80,
    616 => 466,
    617 => 137,
    618 => 132,
    619 => 549,
    620 => 76,
    621 => 105,
    622 => 341,
    623 => 81,
    624 => 474,
    625 => 116,
    626 => 115,
    627 => 294,
    628 => 67,
    629 => 337,
    630 => 130,
    631 => 116,
    632 => 84,
    633 => 1104,
    634 => 229,
    635 => 64,
    636 => 550,
    637 => 139,
    638 => 8,
    639 => 8,
    640 => 7,
    641 => 5,
    642 => 4,
    643 => 9,
    644 => 5,
    645 => 5,
    646 => 6,
    647 => 9,
    648 => 17,
    649 => 11,
    650 => 405,
    651 => 307,
    652 => 90,
    653 => 745,
    654 => 478,
    655 => 105,
    656 => 401,
    657 => 504,
    658 => 72,
    659 => 265,
    660 => 74,
    661 => 1897,
    662 => 529,
    663 => 85,
    664 => 1652,
    665 => 256,
    666 => 126,
    667 => 478,
    668 => 93,
    669 => 1536,
    670 => 484,
    671 => 77,
    672 => 420,
    673 => 87,
    674 => 538,
    675 => 77,
    676 => 109,
    677 => 370,
    678 => 78,
    679 => 2082,
    680 => 438,
    681 => 118,
    682 => 265,
    683 => 98,
    684 => 338,
    685 => 113,
    686 => 544,
    687 => 132,
    688 => 390,
    689 => 133,
    690 => 453,
    691 => 69,
    692 => 510,
    693 => 121,
    694 => 462,
    695 => 73,
    696 => 278,
    697 => 69,
    698 => 340,
    699 => 68,
    700 => 95,
    701 => 74,
    702 => 104,
    703 => 134,
    704 => 1258,
    705 => 222,
    706 => 96,
    707 => 118,
    708 => 256,
    709 => 66,
    710 => 278,
    711 => 135,
    712 => 286,
    713 => 135,
    714 => 338,
    715 => 67,
    716 => 9,
    717 => 4,
    718 => 7,
    719 => 17,
    720 => 11,
    721 => 8,
    722 => 542,
    723 => 533,
    724 => 98,
    725 => 658,
    726 => 433,
    727 => 110,
    728 => 534,
    729 => 265,
    730 => 80,
    731 => 1360,
    732 => 491,
    733 => 97,
    734 => 346,
    735 => 100,
    736 => 1757,
    737 => 406,
    738 => 71,
    739 => 477,
    740 => 67,
    741 => 124,
    742 => 295,
    743 => 112,
    744 => 514,
    745 => 86,
    746 => 133,
    747 => 277,
    748 => 95,
    749 => 299,
    750 => 127,
    751 => 263,
    752 => 65,
    753 => 365,
    754 => 92,
    755 => 472,
    756 => 75,
    757 => 337,
    758 => 127,
    759 => 511,
    760 => 91,
    761 => 1600,
    762 => 448,
    763 => 97,
    764 => 65,
    765 => 140,
    766 => 93,
    767 => 366,
    768 => 97,
    769 => 355,
    770 => 115,
    771 => 75,
    772 => 9,
    773 => 8,
    774 => 75,
    775 => 90,
    776 => 108,
    777 => 92,
    778 => 77,
    779 => 129,
    780 => 96,
    781 => 78,
    782 => 1143,
    783 => 220,
    784 => 42,
    785 => 4,
    786 => 6,
    787 => 9,
    788 => 7,
    789 => 5,
    790 => 9,
    791 => 6,
    792 => 7,
    793 => 3,
    794 => 4,
    795 => 2,
    796 => 3,
    797 => 2,
    798 => 2,
    799 => 4,
    800 => 8,
    801 => 13,
    802 => 12,
    803 => 2,
    804 => 2,
    805 => 3,
    806 => 2,
    807 => 14,
    808 => 8,
    809 => 12,
    810 => 476,
    811 => 493,
    812 => 104,
    813 => 508,
    814 => 414,
    815 => 66,
    816 => 709,
    817 => 275,
    818 => 131,
    819 => 531,
    820 => 129,
    821 => 1558,
    822 => 278,
    823 => 90,
    824 => 1069,
    825 => 305,
    826 => 73,
    827 => 285,
    828 => 126,
    829 => 551,
    830 => 120,
    831 => 291,
    832 => 121,
    833 => 532,
    834 => 120,
    835 => 533,
    836 => 98,
    837 => 1248,
    838 => 370,
    839 => 102,
    840 => 366,
    841 => 106,
    842 => 82,
    843 => 499,
    844 => 136,
    845 => 104,
    846 => 320,
    847 => 136,
    848 => 563,
    849 => 112,
    850 => 449,
    851 => 64,
    852 => 411,
    853 => 97,
    854 => 396,
    855 => 138,
    856 => 1763,
    857 => 310,
    858 => 107,
    859 => 1673,
    860 => 474,
    861 => 132,
    862 => 18,
    863 => 14,
    864 => 18,
    865 => 8,
    866 => 5,
    867 => 8,
    868 => 501,
    869 => 144,
    870 => 128,
    871 => 103,
    872 => 551,
    873 => 112,
    874 => 67,
    875 => 129,
    876 => 107,
    877 => 131,
    878 => 471,
    879 => 73,
    880 => 132,
    881 => 130,
    882 => 118,
    883 => 83,
    884 => 83,
    885 => 1963,
    886 => 492,
    887 => 80,
    888 => 7,
    889 => 7,
    890 => 9,
    891 => 5,
    892 => 9,
    893 => 12,
    894 => 6,
    895 => 6,
    896 => 7,
    897 => 7,
    898 => 4,
    10031 => 10,
    10032 => 17,
    10033 => 13,
    10036 => 80,
    10037 => 81,
    10028 => 78,
    10029 => 140,
    10030 => 125,
    10066 => 88,
    10193 => 33,
    10194 => 9,
    10202 => 18,
    10203 => 30,
    10204 => 13,
    10205 => 19,
    10206 => 16,
    10207 => 22,
    10208 => 16,
    10209 => 21,
    10210 => 13,
    10211 => 20,
    10212 => 11,
    10213 => 7,
    10214 => 31,
    10215 => 18,
    10216 => 11,
    10217 => 12,
    10340 => 5,
    10222 => 7,
    10225 => 86,
    10226 => 75,
    10227 => 78,
    10320 => 16,
    10321 => 21,
    10322 => 10,
    10323 => 23,
    10324 => 17,
    10325 => 24,
    10326 => 18,
    10327 => 8,
    10328 => 1,
    10329 => 1,
    10330 => 1,
    10331 => 4,
    10332 => 19,
    10333 => 11,
    10334 => 26,
    10335 => 11,
    10336 => 33,
    10338 => 16,
    10339 => 9,
    10360 => 4
  }

  use Mix.Task
  import Ecto.Query
  alias Poketwo.Database.Repo
  alias Poketwo.Database.Models.Variant

  require Logger

  @impl true
  def run(_args) do
    @spawn_weights
    |> Enum.reduce(Ecto.Multi.new(), fn {id, spawn_weight}, multi ->
      Ecto.Multi.update_all(
        multi,
        "#{id}",
        from(v in Variant, where: v.id == ^id),
        set: [is_catchable: true, spawn_weight: spawn_weight]
      )
    end)
    |> Repo.transaction()
  end
end
